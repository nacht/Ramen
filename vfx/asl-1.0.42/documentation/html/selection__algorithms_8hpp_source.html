<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: selection_algorithms.hpp Source File</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="adobe_apollo.html">Adobe Air</a><br/>
        <a href="http://stlab.adobe.com/gil/">Adobe GIL</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>
        <a href="http://labs.adobe.com">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://www.adobe.com/products/xmp/">Adobe XMP</a><br/>
        <a href="http://www.mozilla.org/projects/tamarin">Tamarin project<br/>(Mozilla Foundation)</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.5.9 -->
<h1>selection_algorithms.hpp</h1><a href="selection__algorithms_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright 2005-2007 Adobe Systems Incorporated</span>
<a name="l00003"></a>00003 <span class="comment">    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt</span>
<a name="l00004"></a>00004 <span class="comment">    or a copy at http://stlab.adobe.com/licenses.html)</span>
<a name="l00005"></a>00005 <span class="comment">*/</span>
<a name="l00006"></a>00006 <span class="comment">/*************************************************************************************************/</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef ADOBE_ALGORITHM_SELECTION_HPP</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define ADOBE_ALGORITHM_SELECTION_HPP</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;<a class="code" href="config_8hpp.html">adobe/config.hpp</a>&gt;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;functional&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;boost/range/begin.hpp&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;boost/range/end.hpp&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;boost/range/value_type.hpp&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;boost/range/size_type.hpp&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;boost/range/size.hpp&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="other__of_8hpp.html">adobe/algorithm/other_of.hpp</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="rotate_8hpp.html">adobe/algorithm/rotate.hpp</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="type__functions_8hpp.html">adobe/iterator/type_functions.hpp</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="comment">/*************************************************************************************************/</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">namespace </span>adobe {
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*************************************************************************************************/</span>
<a name="l00047"></a>00047 <span class="comment">/*************************************************************************************************/</span>
<a name="l00054"></a>00054 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S, <span class="comment">// S models ForwardIterator, value_type(S) == I</span>
<a name="l00055"></a>00055           <span class="keyword">typename</span> O, <span class="comment">// O models OutputIterator</span>
<a name="l00056"></a>00056           <span class="keyword">typename</span> P&gt; <span class="comment">// P models BinaryPredicate</span>
<a name="l00057"></a><a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">00057</a> <span class="keyword">inline</span> O <a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">selection_operation_remainder</a>(S    first,
<a name="l00058"></a>00058                                        S    last,
<a name="l00059"></a>00059                                        O    output,
<a name="l00060"></a>00060                                        <span class="keywordtype">bool</span> this_inside,
<a name="l00061"></a>00061                                        <span class="keywordtype">bool</span> other_inside,
<a name="l00062"></a>00062                                        P    pred)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064     <span class="keywordtype">bool</span> prev_op_result(pred(this_inside, other_inside));
<a name="l00065"></a>00065 
<a name="l00066"></a>00066     <span class="keywordflow">while</span> (first != last)
<a name="l00067"></a>00067     {
<a name="l00068"></a>00068         this_inside = !this_inside;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         <span class="keywordtype">bool</span> cur_op_result(pred(this_inside, other_inside));
<a name="l00071"></a>00071 
<a name="l00072"></a>00072         <span class="keywordflow">if</span> (prev_op_result ^ cur_op_result)
<a name="l00073"></a>00073             *output++ = *first;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075         prev_op_result = cur_op_result;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077         ++first;
<a name="l00078"></a>00078     }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">return</span> output;
<a name="l00081"></a>00081 }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">/*************************************************************************************************/</span>
<a name="l00089"></a>00089 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> C1,      <span class="comment">// C1 models ConvertibleToBool</span>
<a name="l00090"></a>00090           <span class="keyword">typename</span> C2 = C1&gt; <span class="comment">// C2 models ConvertibleToBool</span>
<a name="l00091"></a><a class="code" href="structadobe_1_1logical__xor.html">00091</a> <span class="keyword">struct </span><a class="code" href="structadobe_1_1logical__xor.html" title="xor funtion object">logical_xor</a> : std::binary_function&lt;C1, C2, bool&gt;
<a name="l00092"></a>00092 {
<a name="l00094"></a><a class="code" href="structadobe_1_1logical__xor.html#1dad4b1a9a4f4f7579df63fe66d91a2e">00094</a>     <span class="keywordtype">bool</span> <a class="code" href="structadobe_1_1logical__xor.html#1dad4b1a9a4f4f7579df63fe66d91a2e">operator()</a>(<span class="keyword">const</span> C1&amp; x, <span class="keyword">const</span> C2&amp; y)<span class="keyword"> const</span>
<a name="l00095"></a>00095 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(x) ^ static_cast&lt;bool&gt;(y); }
<a name="l00096"></a>00096 };
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">/*************************************************************************************************/</span>
<a name="l00104"></a>00104 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models ForwardIterator, value_type(S1) == value_type(S2)</span>
<a name="l00105"></a>00105           <span class="keyword">typename</span> S2, <span class="comment">// S2 models ForwardIterator, value_type(S2) == value_type(S1)</span>
<a name="l00106"></a>00106           <span class="keyword">typename</span> O,  <span class="comment">// O models OutputIterator</span>
<a name="l00107"></a>00107           <span class="keyword">typename</span> P,  <span class="comment">// P models BinaryPredicate</span>
<a name="l00108"></a>00108           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00109"></a><a class="code" href="group__selection__algorithms.html#gb4ec6e3f07976c32c6e9a6b7d17a5617">00109</a> O <a class="code" href="group__selection__algorithms.html#gb4ec6e3f07976c32c6e9a6b7d17a5617" title="selection_operation implementation">selection_operation</a>(S1   s1_first,
<a name="l00110"></a>00110                       S1   s1_last,
<a name="l00111"></a>00111                       S2   s2_first,
<a name="l00112"></a>00112                       S2   s2_last,
<a name="l00113"></a>00113                       O    output,
<a name="l00114"></a>00114                       <span class="keywordtype">bool</span> s1_inside,
<a name="l00115"></a>00115                       <span class="keywordtype">bool</span> s2_inside,
<a name="l00116"></a>00116                       P    pred,
<a name="l00117"></a>00117                       C    comp)
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119     <span class="keywordflow">if</span> (s1_first == s1_last)
<a name="l00120"></a>00120         <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">selection_operation_remainder</a>(s2_first, s2_last, output, s2_inside, s1_inside, pred);
<a name="l00121"></a>00121     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s2_first == s2_last)
<a name="l00122"></a>00122         <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">selection_operation_remainder</a>(s1_first, s1_last, output, s1_inside, s2_inside, pred);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     <span class="keywordtype">bool</span> prev_op_result(pred(s1_inside, s2_inside));
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128         <span class="keyword">typename</span> std::iterator_traits&lt;S1&gt;::value_type next(comp(*s1_first, *s2_first) ? *s1_first : *s2_first);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130         <span class="keywordflow">if</span> (*s1_first == next)
<a name="l00131"></a>00131         {
<a name="l00132"></a>00132             s1_inside = !s1_inside;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134             ++s1_first;
<a name="l00135"></a>00135         }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <span class="keywordflow">if</span> (*s2_first == next)
<a name="l00138"></a>00138         {
<a name="l00139"></a>00139             s2_inside = !s2_inside;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141             ++s2_first;
<a name="l00142"></a>00142         }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         <span class="keywordtype">bool</span> cur_op_result(pred(s1_inside, s2_inside));
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (prev_op_result ^ cur_op_result)
<a name="l00147"></a>00147             *output++ = next;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149         prev_op_result = cur_op_result;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151         <span class="keywordflow">if</span> (s1_first == s1_last)
<a name="l00152"></a>00152             <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">selection_operation_remainder</a>(s2_first, s2_last, output, s2_inside, s1_inside, pred);
<a name="l00153"></a>00153         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s2_first == s2_last)
<a name="l00154"></a>00154             <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g2b51445eaf0e6a04ed3977167a2c3623">selection_operation_remainder</a>(s1_first, s1_last, output, s1_inside, s2_inside, pred);
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="keywordflow">return</span> output;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">/*************************************************************************************************/</span>
<a name="l00166"></a>00166 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models ForwardIterator, value_type(S1) == I</span>
<a name="l00167"></a>00167           <span class="keyword">typename</span> S2, <span class="comment">// S2 models ForwardIterator, value_type(S2) == I</span>
<a name="l00168"></a>00168           <span class="keyword">typename</span> O,  <span class="comment">// O models OutputIterator</span>
<a name="l00169"></a>00169           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00170"></a><a class="code" href="group__selection__algorithms.html#g7d151d2d10f526bacd2264accb8198ad">00170</a> <span class="keyword">inline</span> O <a class="code" href="group__selection__algorithms.html#g7d151d2d10f526bacd2264accb8198ad" title="selection_union implementation">selection_union</a>(S1   s1_first,
<a name="l00171"></a>00171                          S1   s1_last,
<a name="l00172"></a>00172                          S2   s2_first,
<a name="l00173"></a>00173                          S2   s2_last,
<a name="l00174"></a>00174                          O    output,
<a name="l00175"></a>00175                          C    comp,
<a name="l00176"></a>00176                          <span class="keywordtype">bool</span> s1_inside = <span class="keyword">false</span>,
<a name="l00177"></a>00177                          <span class="keywordtype">bool</span> s2_inside = <span class="keyword">false</span>)
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#gb4ec6e3f07976c32c6e9a6b7d17a5617" title="selection_operation implementation">selection_operation</a>(s1_first, s1_last,
<a name="l00180"></a>00180                                s2_first, s2_last,
<a name="l00181"></a>00181                                output,
<a name="l00182"></a>00182                                s1_inside,
<a name="l00183"></a>00183                                s2_inside,
<a name="l00184"></a>00184                                std::logical_or&lt;bool&gt;(),
<a name="l00185"></a>00185                                comp);
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">/*************************************************************************************************/</span>
<a name="l00194"></a>00194 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models ForwardIterator, value_type(S1) == I</span>
<a name="l00195"></a>00195           <span class="keyword">typename</span> S2, <span class="comment">// S2 models ForwardIterator, value_type(S2) == I</span>
<a name="l00196"></a>00196           <span class="keyword">typename</span> O,  <span class="comment">// O models OutputIterator</span>
<a name="l00197"></a>00197           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00198"></a><a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666">00198</a> <span class="keyword">inline</span> O <a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666" title="selection_intersection implementation">selection_intersection</a>(S1   s1_first,
<a name="l00199"></a>00199                                 S1   s1_last,
<a name="l00200"></a>00200                                 S2   s2_first,
<a name="l00201"></a>00201                                 S2   s2_last,
<a name="l00202"></a>00202                                 O    output,
<a name="l00203"></a>00203                                 C    comp,
<a name="l00204"></a>00204                                 <span class="keywordtype">bool</span> s1_inside = <span class="keyword">false</span>,
<a name="l00205"></a>00205                                 <span class="keywordtype">bool</span> s2_inside = <span class="keyword">false</span>)
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#gb4ec6e3f07976c32c6e9a6b7d17a5617" title="selection_operation implementation">selection_operation</a>(s1_first, s1_last,
<a name="l00208"></a>00208                                s2_first, s2_last,
<a name="l00209"></a>00209                                output,
<a name="l00210"></a>00210                                s1_inside,
<a name="l00211"></a>00211                                s2_inside,
<a name="l00212"></a>00212                                std::logical_and&lt;bool&gt;(),
<a name="l00213"></a>00213                                comp);
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="comment">/*************************************************************************************************/</span>
<a name="l00222"></a>00222 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models ForwardIterator, value_type(S1) == I</span>
<a name="l00223"></a>00223           <span class="keyword">typename</span> S2, <span class="comment">// S2 models ForwardIterator, value_type(S2) == I</span>
<a name="l00224"></a>00224           <span class="keyword">typename</span> O,  <span class="comment">// O models OutputIterator</span>
<a name="l00225"></a>00225           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00226"></a><a class="code" href="group__selection__algorithms.html#gdfc1db4416b8a27925573752bb801e6c">00226</a> <span class="keyword">inline</span> O <a class="code" href="group__selection__algorithms.html#gdfc1db4416b8a27925573752bb801e6c" title="selection_difference implementation">selection_difference</a>(S1   s1_first,
<a name="l00227"></a>00227                               S1   s1_last,
<a name="l00228"></a>00228                               S2   s2_first,
<a name="l00229"></a>00229                               S2   s2_last,
<a name="l00230"></a>00230                               O    output,
<a name="l00231"></a>00231                               C    comp,
<a name="l00232"></a>00232                               <span class="keywordtype">bool</span> s1_inside = <span class="keyword">false</span>,
<a name="l00233"></a>00233                               <span class="keywordtype">bool</span> s2_inside = <span class="keyword">false</span>)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666" title="selection_intersection implementation">selection_intersection</a>(s1_first, s1_last,
<a name="l00236"></a>00236                                   s2_first, s2_last,
<a name="l00237"></a>00237                                   output,
<a name="l00238"></a>00238                                   comp,
<a name="l00239"></a>00239                                   s1_inside,
<a name="l00240"></a>00240                                   !s2_inside);
<a name="l00241"></a>00241 }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">/*************************************************************************************************/</span>
<a name="l00249"></a>00249 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models ForwardIterator, value_type(S1) == I</span>
<a name="l00250"></a>00250           <span class="keyword">typename</span> S2, <span class="comment">// S2 models ForwardIterator, value_type(S2) == I</span>
<a name="l00251"></a>00251           <span class="keyword">typename</span> O,  <span class="comment">// O models OutputIterator</span>
<a name="l00252"></a>00252           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00253"></a><a class="code" href="group__selection__algorithms.html#g2b8d3fe6f353246974f3fc8641c9640f">00253</a> <span class="keyword">inline</span> O <a class="code" href="group__selection__algorithms.html#g2b8d3fe6f353246974f3fc8641c9640f" title="selection_symmetric_difference implementation">selection_symmetric_difference</a>(S1   s1_first,
<a name="l00254"></a>00254                                         S1   s1_last,
<a name="l00255"></a>00255                                         S2   s2_first,
<a name="l00256"></a>00256                                         S2   s2_last,
<a name="l00257"></a>00257                                         O    output,
<a name="l00258"></a>00258                                         C    comp,
<a name="l00259"></a>00259                                         <span class="keywordtype">bool</span> s1_inside = <span class="keyword">false</span>,
<a name="l00260"></a>00260                                         <span class="keywordtype">bool</span> s2_inside = <span class="keyword">false</span>)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#gb4ec6e3f07976c32c6e9a6b7d17a5617" title="selection_operation implementation">selection_operation</a>(s1_first, s1_last,
<a name="l00263"></a>00263                                s2_first, s2_last,
<a name="l00264"></a>00264                                output,
<a name="l00265"></a>00265                                s1_inside,
<a name="l00266"></a>00266                                s2_inside,
<a name="l00267"></a>00267                                <a class="code" href="structadobe_1_1logical__xor.html" title="xor funtion object">logical_xor&lt;bool&gt;</a>(),
<a name="l00268"></a>00268                                comp);
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">/*************************************************************************************************/</span>
<a name="l00277"></a>00277 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S1, <span class="comment">// S1 models InputIterator, value_type(S1) == I</span>
<a name="l00278"></a>00278           <span class="keyword">typename</span> S2, <span class="comment">// S2 models InputIterator, value_type(S2) == I</span>
<a name="l00279"></a>00279           <span class="keyword">typename</span> C&gt;  <span class="comment">// C models StrictWeakOrdering</span>
<a name="l00280"></a><a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38">00280</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38" title="selection_includes implementation">selection_includes</a>(S1   s1_first,
<a name="l00281"></a>00281                                S1   s1_last,
<a name="l00282"></a>00282                                S2   s2_first,
<a name="l00283"></a>00283                                S2   s2_last,
<a name="l00284"></a>00284                                C    comp,
<a name="l00285"></a>00285                                <span class="keywordtype">bool</span> s1_inside = <span class="keyword">false</span>,
<a name="l00286"></a>00286                                <span class="keywordtype">bool</span> s2_inside = <span class="keyword">false</span>)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288     <span class="keywordflow">if</span> (s1_inside == s2_inside)
<a name="l00289"></a>00289     {
<a name="l00290"></a>00290         <span class="keyword">typedef</span> <span class="keyword">typename</span> std::iterator_traits&lt;S1&gt;::value_type value_type;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         std::vector&lt;value_type&gt; result;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666" title="selection_intersection implementation">selection_intersection</a>(s1_first, s1_last,
<a name="l00295"></a>00295                                s2_first, s2_last,
<a name="l00296"></a>00296                                std::back_inserter(result),
<a name="l00297"></a>00297                                comp,
<a name="l00298"></a>00298                                s1_inside, s2_inside);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300         <span class="keywordflow">return</span> <a class="code" href="group__equal.html#gb42837481bc7251e15e3b67dd91f239c">std::equal</a>(s2_first, s2_last, result.begin());
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s1_inside)
<a name="l00303"></a>00303     {
<a name="l00304"></a>00304         <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38" title="selection_includes implementation">selection_includes</a>(boost::next(s1_first), s1_last,
<a name="l00305"></a>00305                                   s2_first, s2_last,
<a name="l00306"></a>00306                                   comp, !s1_inside, s2_inside);
<a name="l00307"></a>00307     }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     <span class="comment">// s2_inside == true</span>
<a name="l00310"></a>00310     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38" title="selection_includes implementation">selection_includes</a>(s1_first, s1_last,
<a name="l00311"></a>00311                               boost::next(s2_first), s2_last,
<a name="l00312"></a>00312                               comp, s1_inside, !s2_inside);
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 <span class="comment">/****************************************************************************************************/</span>
<a name="l00321"></a>00321 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection1, <span class="keyword">typename</span> Selection2&gt;
<a name="l00322"></a><a class="code" href="group__selection__algorithms.html#gd8dc2b1866edc0f0577c00148cbf0764">00322</a> Selection1 <a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666" title="selection_intersection implementation">selection_intersection</a>(<span class="keyword">const</span> Selection1&amp; x, <span class="keyword">const</span> Selection2&amp; y)
<a name="l00323"></a>00323 {
<a name="l00324"></a>00324     <span class="keywordflow">if</span> (&amp;x == &amp;y)
<a name="l00325"></a>00325         <span class="keywordflow">return</span> x;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     Selection1 result;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <a class="code" href="group__selection__algorithms.html#gb40015a55c3983456d818692e403e666" title="selection_intersection implementation">adobe::selection_intersection</a>(x.begin(), x.end(),
<a name="l00330"></a>00330                                   y.begin(), y.end(),
<a name="l00331"></a>00331                                   std::back_inserter(result),
<a name="l00332"></a>00332                                   std::less&lt;typename boost::range_value&lt;Selection1&gt;::type&gt;(),
<a name="l00333"></a>00333                                   <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x),
<a name="l00334"></a>00334                                   <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(y));
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     <span class="keywordflow">return</span> result;
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/****************************************************************************************************/</span>
<a name="l00345"></a>00345 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection1, <span class="keyword">typename</span> Selection2&gt;
<a name="l00346"></a><a class="code" href="group__selection__algorithms.html#ga2f8f3bba5b11918f0838b727a4d7076">00346</a> Selection1 <a class="code" href="group__selection__algorithms.html#g7d151d2d10f526bacd2264accb8198ad" title="selection_union implementation">selection_union</a>(<span class="keyword">const</span> Selection1&amp; x, <span class="keyword">const</span> Selection2&amp; y)
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="keywordflow">if</span> (&amp;x == &amp;y)
<a name="l00349"></a>00349         <span class="keywordflow">return</span> x;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     Selection1 result;
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <a class="code" href="group__selection__algorithms.html#g7d151d2d10f526bacd2264accb8198ad" title="selection_union implementation">adobe::selection_union</a>(x.begin(), x.end(),
<a name="l00354"></a>00354                            y.begin(), y.end(),
<a name="l00355"></a>00355                            std::back_inserter(result),
<a name="l00356"></a>00356                            std::less&lt;typename boost::range_value&lt;Selection1&gt;::type&gt;(),
<a name="l00357"></a>00357                            <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x),
<a name="l00358"></a>00358                            <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(y));
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     <span class="keywordflow">return</span> result;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="comment">/****************************************************************************************************/</span>
<a name="l00369"></a>00369 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection1, <span class="keyword">typename</span> Selection2&gt;
<a name="l00370"></a><a class="code" href="group__selection__algorithms.html#gba7abcd0b4a59b1619c0cba752b9e88e">00370</a> Selection1 <a class="code" href="group__selection__algorithms.html#gdfc1db4416b8a27925573752bb801e6c" title="selection_difference implementation">selection_difference</a>(<span class="keyword">const</span> Selection1&amp; x, <span class="keyword">const</span> Selection2&amp; y)
<a name="l00371"></a>00371 {
<a name="l00372"></a>00372     <span class="keywordflow">if</span> (&amp;x == &amp;y)
<a name="l00373"></a>00373         <span class="keywordflow">return</span> Selection1();
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     Selection1 result;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <a class="code" href="group__selection__algorithms.html#gdfc1db4416b8a27925573752bb801e6c" title="selection_difference implementation">adobe::selection_difference</a>(x.begin(), x.end(),
<a name="l00378"></a>00378                                 y.begin(), y.end(),
<a name="l00379"></a>00379                                 std::back_inserter(result),
<a name="l00380"></a>00380                                 std::less&lt;typename boost::range_value&lt;Selection1&gt;::type&gt;(),
<a name="l00381"></a>00381                                 <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x),
<a name="l00382"></a>00382                                 <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(y));
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="keywordflow">return</span> result;
<a name="l00385"></a>00385 }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 <span class="comment">/****************************************************************************************************/</span>
<a name="l00393"></a>00393 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection1, <span class="keyword">typename</span> Selection2&gt;
<a name="l00394"></a><a class="code" href="group__selection__algorithms.html#g22b88fa69cfe4fa510a78596d4db07ad">00394</a> Selection1 <a class="code" href="group__selection__algorithms.html#g2b8d3fe6f353246974f3fc8641c9640f" title="selection_symmetric_difference implementation">selection_symmetric_difference</a>(<span class="keyword">const</span> Selection1&amp; x, <span class="keyword">const</span> Selection2&amp; y)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396     <span class="keywordflow">if</span> (&amp;x == &amp;y)
<a name="l00397"></a>00397         <span class="keywordflow">return</span> Selection1();
<a name="l00398"></a>00398 
<a name="l00399"></a>00399     Selection1 result;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <a class="code" href="group__selection__algorithms.html#g2b8d3fe6f353246974f3fc8641c9640f" title="selection_symmetric_difference implementation">adobe::selection_symmetric_difference</a>(x.begin(), x.end(),
<a name="l00402"></a>00402                                           y.begin(), y.end(),
<a name="l00403"></a>00403                                           std::back_inserter(result),
<a name="l00404"></a>00404                                           std::less&lt;typename boost::range_value&lt;Selection1&gt;::type&gt;(),
<a name="l00405"></a>00405                                           <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x),
<a name="l00406"></a>00406                                           <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(y));
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">return</span> result;
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">/****************************************************************************************************/</span>
<a name="l00417"></a>00417 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection1, <span class="keyword">typename</span> Selection2&gt;
<a name="l00418"></a><a class="code" href="group__selection__algorithms.html#g93301a2ef8bc9abd5fe30cc63f93ae4c">00418</a> <span class="keywordtype">bool</span> <a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38" title="selection_includes implementation">selection_includes</a>(<span class="keyword">const</span> Selection1&amp; x, <span class="keyword">const</span> Selection2&amp; y)
<a name="l00419"></a>00419 {
<a name="l00420"></a>00420     <span class="keywordflow">if</span> (&amp;x == &amp;y)
<a name="l00421"></a>00421         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g4fbce39cf92e583a3cab0b0ab1a89f38" title="selection_includes implementation">adobe::selection_includes</a>(x.begin(), x.end(),
<a name="l00424"></a>00424                                      y.begin(), y.end(),
<a name="l00425"></a>00425                                      std::less&lt;typename boost::range_value&lt;Selection1&gt;::type&gt;(),
<a name="l00426"></a>00426                                      <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x),
<a name="l00427"></a>00427                                      <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(y));
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <span class="comment">/****************************************************************************************************/</span>
<a name="l00436"></a>00436 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00437"></a><a class="code" href="group__selection__algorithms.html#g03ed299bcedc1abd1fd18b7ea66aa632">00437</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__selection__algorithms.html#g03ed299bcedc1abd1fd18b7ea66aa632" title="invert implementation">invert</a>(Selection&amp; x)
<a name="l00438"></a>00438 { x.invert(); }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 <span class="comment">/****************************************************************************************************/</span>
<a name="l00446"></a>00446 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00447"></a><a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6">00447</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(<span class="keyword">const</span> Selection&amp; x)
<a name="l00448"></a>00448 { <span class="keywordflow">return</span> x.start_selected(); }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 <span class="comment">/****************************************************************************************************/</span>
<a name="l00456"></a>00456 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00457"></a><a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">00457</a> <span class="keyword">inline</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type <a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">size</a>(<span class="keyword">const</span> Selection&amp; x)
<a name="l00458"></a>00458 { <span class="keywordflow">return</span> x.size(); }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="comment">/****************************************************************************************************/</span>
<a name="l00466"></a>00466 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection, <span class="keyword">typename</span> ForwardRange&gt;
<a name="l00467"></a><a class="code" href="group__selection__algorithms.html#ge260f209173f7775b87df5c4ee3b68c2">00467</a> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type <a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">size</a>(<span class="keyword">const</span> Selection&amp; x, <span class="keyword">const</span> ForwardRange&amp; range)
<a name="l00468"></a>00468 {
<a name="l00469"></a>00469     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type    selection_const_iterator;
<a name="l00470"></a>00470     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type              selection_size_type;
<a name="l00471"></a>00471     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;ForwardRange&gt;::type range_const_iterator;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="keywordflow">if</span> (x.empty())
<a name="l00474"></a>00474         <span class="keywordflow">return</span> 0;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <span class="comment">// this is the case when the selection has no elements, but it starts selected</span>
<a name="l00477"></a>00477     <span class="comment">// (in other words, every item in the selection is toggled as selected)</span>
<a name="l00478"></a>00478     <span class="keywordflow">if</span> (x.size() == 0)
<a name="l00479"></a>00479         <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">boost::size</a>(range);
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     selection_const_iterator s_iter(boost::begin(x));
<a name="l00482"></a>00482     selection_const_iterator s_last(boost::end(x));
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     range_const_iterator prev(boost::begin(range));
<a name="l00485"></a>00485     range_const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::next(prev, *s_iter));
<a name="l00486"></a>00486     range_const_iterator last(boost::end(range));
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     selection_size_type result(0);
<a name="l00489"></a>00489     <span class="keywordtype">bool</span>                inside(<a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x));
<a name="l00490"></a>00490 
<a name="l00491"></a>00491     <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00492"></a>00492     {
<a name="l00493"></a>00493         <span class="keywordflow">if</span> (inside)
<a name="l00494"></a>00494             result += <span class="keyword">static_cast&lt;</span>selection_size_type<span class="keyword">&gt;</span>(<a class="code" href="group__adobe__iterator.html#g29c0de3eda3110fdb93572073fc56579">std::distance</a>(prev, iter));
<a name="l00495"></a>00495 
<a name="l00496"></a>00496         <span class="keywordflow">if</span> (iter == last)
<a name="l00497"></a>00497             <span class="keywordflow">break</span>;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499         prev = iter;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501         iter = ++s_iter == s_last ? last : boost::next(boost::begin(range), *s_iter);
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         inside = !inside;
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505 
<a name="l00506"></a>00506     <span class="keywordflow">return</span> result;
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="comment">/****************************************************************************************************/</span>
<a name="l00515"></a>00515 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00516"></a><a class="code" href="group__selection__algorithms.html#g1779b4acd8a58bcce83010a80e8d5c87">00516</a> <span class="keywordtype">bool</span> <a class="code" href="group__selection__algorithms.html#g1779b4acd8a58bcce83010a80e8d5c87">is_selected</a>(<span class="keyword">const</span> Selection&amp; x, <span class="keyword">typename</span> Selection::value_type index)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518     <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type found(<a class="code" href="namespaceadobe_1_1fn.html#5519de0468734eff69a4e0699a31009e">std::upper_bound</a>(boost::begin(x), boost::end(x), index));
<a name="l00519"></a>00519     <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           <a class="code" href="group__count.html#g0a7c479c6dffa60d3aae2abdcce31a5e" title="count implementation">count</a>(<a class="code" href="group__adobe__iterator.html#g29c0de3eda3110fdb93572073fc56579">std::distance</a>(boost::begin(x), found));
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="keywordflow">return</span> (count % 2 == 1) ^ <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x);
<a name="l00522"></a>00522 }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="comment">/****************************************************************************************************/</span>
<a name="l00531"></a>00531 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection, <span class="keyword">typename</span> ForwardRange, <span class="keyword">typename</span> OutputIterator&gt;
<a name="l00532"></a><a class="code" href="group__selection__algorithms.html#g6e207a92292089cf5773f31fc8db0960">00532</a> OutputIterator <a class="code" href="group__selection__algorithms.html#g6e207a92292089cf5773f31fc8db0960">selection_copy</a>(<span class="keyword">const</span> Selection&amp; x, <span class="keyword">const</span> ForwardRange&amp; range, OutputIterator output)
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type    selection_const_iterator;
<a name="l00535"></a>00535     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;ForwardRange&gt;::type range_const_iterator;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (<a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">boost::size</a>(range) == 0)
<a name="l00538"></a>00538         <span class="keywordflow">return</span> output;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540     <span class="keywordtype">bool</span> inside(<a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x));
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     selection_const_iterator s_iter(boost::begin(x));
<a name="l00543"></a>00543     selection_const_iterator s_last(boost::end(x));
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     range_const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::begin(range));
<a name="l00546"></a>00546     range_const_iterator last(boost::end(range));
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="keywordflow">while</span> (iter != last)
<a name="l00549"></a>00549     {
<a name="l00550"></a>00550         <span class="keywordflow">if</span> (s_iter != s_last &amp;&amp; iter == boost::next(boost::begin(range), *s_iter))
<a name="l00551"></a>00551         {
<a name="l00552"></a>00552             ++s_iter;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554             inside = !inside;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557         <span class="keywordflow">if</span> (inside)
<a name="l00558"></a>00558             *output++ = *iter;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560         ++iter;
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="keywordflow">return</span> output;
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 <span class="comment">/*************************************************************************************************/</span>
<a name="l00572"></a>00572 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection,
<a name="l00573"></a>00573           <span class="keyword">typename</span> ForwardRange,
<a name="l00574"></a>00574           <span class="keyword">typename</span> O1, <span class="comment">// O1 models OutputIterator</span>
<a name="l00575"></a>00575           <span class="keyword">typename</span> O2&gt; <span class="comment">// O2 models OutputIterator</span>
<a name="l00576"></a><a class="code" href="group__selection__algorithms.html#ge63dbeb5053ef98d07c64a12da796d15">00576</a> std::pair&lt;O1, O2&gt; <a class="code" href="group__selection__algorithms.html#ge63dbeb5053ef98d07c64a12da796d15" title="selection_partition_copy implementation">selection_partition_copy</a>(<span class="keyword">const</span> Selection&amp; selection,
<a name="l00577"></a>00577                                            ForwardRange&amp;    range,
<a name="l00578"></a>00578                                            O1               false_output,
<a name="l00579"></a>00579                                            O2               true_output)
<a name="l00580"></a>00580 {
<a name="l00581"></a>00581     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type selection_const_iterator;
<a name="l00582"></a>00582     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_iterator&lt;ForwardRange&gt;::type    range_iterator;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584     <span class="keywordflow">if</span> (<a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">boost::size</a>(range) == 0)
<a name="l00585"></a>00585         <span class="keywordflow">return</span> <a class="code" href="group__asl__pair.html#g86cec50e4c5771ecd54930cc50dedcfd">std::make_pair</a>(false_output, true_output);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     selection_const_iterator selection_first(boost::begin(selection));
<a name="l00588"></a>00588     selection_const_iterator selection_last(boost::end(selection));
<a name="l00589"></a>00589 
<a name="l00590"></a>00590     range_iterator first(boost::begin(range));
<a name="l00591"></a>00591     range_iterator last(boost::end(range));
<a name="l00592"></a>00592 
<a name="l00593"></a>00593     <span class="keywordtype">bool</span> inside(<a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(selection));
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00596"></a>00596     {
<a name="l00597"></a>00597         range_iterator copy_last(selection_first == selection_last ? last : boost::next(boost::begin(range), *selection_first));
<a name="l00598"></a>00598 
<a name="l00599"></a>00599         <span class="comment">// REVISIT (fbrereto) : It'd be nice to collapse the following into ? :</span>
<a name="l00600"></a>00600         <span class="comment">//                      notation, but some compilers require that the</span>
<a name="l00601"></a>00601         <span class="comment">//                      types returned by ? : be the same, which we cannot</span>
<a name="l00602"></a>00602         <span class="comment">//                      guarantee here.</span>
<a name="l00603"></a>00603         <span class="keywordflow">if</span> (inside)
<a name="l00604"></a>00604             <a class="code" href="group__copy.html#g213e2d8058f7aab229cb3b6099634256" title="copy implementation">std::copy</a>(first, copy_last, true_output);
<a name="l00605"></a>00605         <span class="keywordflow">else</span>
<a name="l00606"></a>00606             <a class="code" href="group__copy.html#g213e2d8058f7aab229cb3b6099634256" title="copy implementation">std::copy</a>(first, copy_last, false_output);
<a name="l00607"></a>00607 
<a name="l00608"></a>00608         <span class="keywordflow">if</span> (copy_last == last)
<a name="l00609"></a>00609             <span class="keywordflow">break</span>;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611         first = copy_last;
<a name="l00612"></a>00612         ++selection_first;
<a name="l00613"></a>00613         inside = !inside;
<a name="l00614"></a>00614     }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <span class="keywordflow">return</span> <a class="code" href="group__asl__pair.html#g86cec50e4c5771ecd54930cc50dedcfd">std::make_pair</a>(false_output, true_output);
<a name="l00617"></a>00617 }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619 <span class="comment">/****************************************************************************************************/</span>
<a name="l00625"></a>00625 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection, <span class="keyword">typename</span> ForwardRange, <span class="keyword">typename</span> UnaryFunction&gt;
<a name="l00626"></a><a class="code" href="group__selection__algorithms.html#g7c95cb85342645fec5317e3ef1498827">00626</a> UnaryFunction <a class="code" href="group__selection__algorithms.html#g7c95cb85342645fec5317e3ef1498827" title="selection_foreach implementation">selection_foreach</a>(<span class="keyword">const</span> Selection&amp; x, <span class="keyword">const</span> ForwardRange&amp; range, UnaryFunction proc)
<a name="l00627"></a>00627 {
<a name="l00628"></a>00628     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type    selection_const_iterator;
<a name="l00629"></a>00629     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;ForwardRange&gt;::type range_const_iterator;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     <span class="keywordtype">bool</span> inside(<a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(x));
<a name="l00632"></a>00632 
<a name="l00633"></a>00633     selection_const_iterator s_iter(boost::begin(x));
<a name="l00634"></a>00634     selection_const_iterator s_last(boost::end(x));
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     range_const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::begin(range));
<a name="l00637"></a>00637     range_const_iterator last(boost::end(range));
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <span class="keywordflow">while</span> (iter != last)
<a name="l00640"></a>00640     {
<a name="l00641"></a>00641         <span class="keywordflow">if</span> (s_iter != s_last &amp;&amp; iter == boost::next(boost::begin(range), *s_iter))
<a name="l00642"></a>00642         {
<a name="l00643"></a>00643             ++s_iter;
<a name="l00644"></a>00644 
<a name="l00645"></a>00645             inside = !inside;
<a name="l00646"></a>00646         }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648         <span class="keywordflow">if</span> (inside)
<a name="l00649"></a>00649             proc(*iter);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651         ++iter;
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <span class="keywordflow">return</span> proc;
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 <span class="comment">/****************************************************************************************************/</span>
<a name="l00663"></a>00663 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00664"></a>00664 <span class="keyword">inline</span>
<a name="l00665"></a>00665 std::pair&lt;typename boost::range_const_iterator&lt;Selection&gt;::type,
<a name="l00666"></a>00666           <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type&gt;
<a name="l00667"></a><a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">00667</a> <a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">selection_find_boundary</a>(<span class="keyword">const</span> Selection&amp;              selection,
<a name="l00668"></a>00668                         <span class="keyword">typename</span> Selection::size_type p,
<a name="l00669"></a>00669                         std::random_access_iterator_tag)
<a name="l00670"></a>00670 {
<a name="l00671"></a>00671     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type const_iterator;
<a name="l00672"></a>00672     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           size_type;
<a name="l00673"></a>00673     <span class="keyword">typedef</span> std::pair&lt;const_iterator, size_type&gt;                  result_type;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675     const_iterator bound(<a class="code" href="namespaceadobe_1_1fn.html#59e44aef9c93131146606040c0b15e38">std::lower_bound</a>(boost::begin(selection), boost::end(selection), p));
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     <span class="keywordflow">return</span> result_type(bound, static_cast&lt;size_type&gt;(<a class="code" href="group__adobe__iterator.html#g29c0de3eda3110fdb93572073fc56579">std::distance</a>(boost::begin(selection), bound)));
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680 <span class="comment">/****************************************************************************************************/</span>
<a name="l00686"></a>00686 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00687"></a>00687 std::pair&lt;typename boost::range_const_iterator&lt;Selection&gt;::type,
<a name="l00688"></a>00688           <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type&gt;
<a name="l00689"></a><a class="code" href="group__selection__algorithms.html#g1e4b75974f756e53c3725bd4e938aa3a">00689</a> <a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">selection_find_boundary</a>(<span class="keyword">const</span> Selection&amp;              selection,
<a name="l00690"></a>00690                         <span class="keyword">typename</span> Selection::size_type p,
<a name="l00691"></a>00691                         std::forward_iterator_tag)
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type const_iterator;
<a name="l00694"></a>00694     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           size_type;
<a name="l00695"></a>00695     <span class="keyword">typedef</span> std::pair&lt;const_iterator, size_type&gt;                  result_type;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697     const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::begin(selection));
<a name="l00698"></a>00698     const_iterator last(boost::end(selection));
<a name="l00699"></a>00699     size_type      boundary_count(0);
<a name="l00700"></a>00700 
<a name="l00701"></a>00701     <span class="keywordflow">while</span> (iter != last &amp;&amp; *iter &lt; p)
<a name="l00702"></a>00702     {
<a name="l00703"></a>00703         ++boundary_count;
<a name="l00704"></a>00704         ++iter;
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     <span class="keywordflow">return</span> result_type(iter, boundary_count);
<a name="l00708"></a>00708 }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710 <span class="comment">/****************************************************************************************************/</span>
<a name="l00729"></a>00729 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection&gt;
<a name="l00730"></a>00730 <span class="keyword">inline</span>
<a name="l00731"></a>00731 std::pair&lt;typename boost::range_const_iterator&lt;Selection&gt;::type,
<a name="l00732"></a>00732           <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type&gt;
<a name="l00733"></a><a class="code" href="group__selection__algorithms.html#gc51b8afb0f8548cd72c4a9e11cee9eed">00733</a> <a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">selection_find_boundary</a>(<span class="keyword">const</span> Selection&amp;              selection,
<a name="l00734"></a>00734                         <span class="keyword">typename</span> Selection::size_type p)
<a name="l00735"></a>00735 {
<a name="l00736"></a>00736     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type const_iterator;
<a name="l00737"></a>00737     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           size_type;
<a name="l00738"></a>00738     <span class="keyword">typedef</span> std::pair&lt;const_iterator, size_type&gt;                  result_type;
<a name="l00739"></a>00739     <span class="keyword">typedef</span> <span class="keyword">typename</span> iterator_category&lt;const_iterator&gt;::type iterator_category;
<a name="l00740"></a>00740 
<a name="l00741"></a>00741     <span class="keywordflow">if</span> (<a class="code" href="group__selection__algorithms.html#g7c5bdb55e42beda2cd6acbe643ef4fa2">boost::size</a>(selection) == 0)
<a name="l00742"></a>00742         <span class="keywordflow">return</span> result_type(boost::end(selection), 0);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">selection_find_boundary</a>(selection, p, iterator_category());
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 <span class="comment">/****************************************************************************************************/</span>
<a name="l00779"></a>00779 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> SelectionIterator, <span class="keyword">typename</span> RangeIterator&gt;
<a name="l00780"></a><a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">00780</a> RangeIterator <a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(SelectionIterator selection_first,
<a name="l00781"></a>00781                                          SelectionIterator selection_last,
<a name="l00782"></a>00782                                          RangeIterator     first,
<a name="l00783"></a>00783                                          RangeIterator     range_first,
<a name="l00784"></a>00784                                          RangeIterator     range_last,
<a name="l00785"></a>00785                                          std::size_t       boundary_count = 0)
<a name="l00786"></a>00786 {
<a name="l00787"></a>00787     std::size_t n(static_cast&lt;std::size_t&gt;(<a class="code" href="group__adobe__iterator.html#g29c0de3eda3110fdb93572073fc56579">std::distance</a>(selection_first, selection_last)));
<a name="l00788"></a>00788 
<a name="l00789"></a>00789     <span class="keywordflow">if</span> (n == 0)
<a name="l00790"></a>00790         <span class="keywordflow">return</span> boundary_count % 2 ? range_first : range_last;
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     std::size_t       half(n / 2);
<a name="l00793"></a>00793     SelectionIterator selection_middle(boost::next(selection_first, half));
<a name="l00794"></a>00794     RangeIterator     range_middle(boost::next(first, *selection_middle));
<a name="l00795"></a>00795 
<a name="l00796"></a>00796     RangeIterator i(<a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(selection_first, selection_middle,
<a name="l00797"></a>00797                                                first, range_first, range_middle,
<a name="l00798"></a>00798                                                boundary_count));
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     RangeIterator j(<a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(boost::next(selection_middle), selection_last,
<a name="l00801"></a>00801                                                first, range_middle, range_last,
<a name="l00802"></a>00802                                                boundary_count + half + 1));
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <span class="keywordflow">return</span> <a class="code" href="group__other__of.html#g8429936a552b158859edc92a6b250070" title="other_of implementation">other_of</a>(<a class="code" href="group__rotate.html#g894605f42a30803d266a7d8c57aa4101">adobe::rotate</a>(i, range_middle, j), range_middle);
<a name="l00805"></a>00805 }
<a name="l00806"></a>00806 
<a name="l00807"></a>00807 <span class="comment">/*************************************************************************************************/</span>
<a name="l00813"></a>00813 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection,
<a name="l00814"></a>00814           <span class="keyword">typename</span> ForwardRange&gt;
<a name="l00815"></a>00815 <span class="keyword">inline</span>
<a name="l00816"></a>00816 <span class="keyword">typename</span> boost::range_iterator&lt;ForwardRange&gt;::type
<a name="l00817"></a><a class="code" href="group__selection__algorithms.html#g1c16f366150273a7a0ad9e4e532a8c79">00817</a> <a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(<span class="keyword">const</span> Selection&amp; selection,
<a name="l00818"></a>00818                            ForwardRange&amp;    range)
<a name="l00819"></a>00819 {
<a name="l00820"></a>00820     <span class="keywordflow">return</span> <a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(boost::begin(selection), boost::end(selection),
<a name="l00821"></a>00821                                       boost::begin(range),
<a name="l00822"></a>00822                                       boost::begin(range), boost::end(range),
<a name="l00823"></a>00823                                       <a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(selection));
<a name="l00824"></a>00824 }
<a name="l00825"></a>00825 
<a name="l00826"></a>00826 <span class="comment">/*************************************************************************************************/</span>
<a name="l00862"></a>00862 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection,
<a name="l00863"></a>00863           <span class="keyword">typename</span> ForwardRange&gt;
<a name="l00864"></a>00864 std::pair&lt;typename boost::range_iterator&lt;ForwardRange&gt;::type,
<a name="l00865"></a>00865           <span class="keyword">typename</span> boost::range_iterator&lt;ForwardRange&gt;::type&gt;
<a name="l00866"></a><a class="code" href="group__selection__algorithms.html#gfb99a9930d0c111d7f6560dacdc50b23">00866</a> <a class="code" href="group__selection__algorithms.html#gfb99a9930d0c111d7f6560dacdc50b23">selection_stable_partition_about</a>(<span class="keyword">const</span> Selection&amp;                            selection,
<a name="l00867"></a>00867                                  ForwardRange&amp;                               range,
<a name="l00868"></a>00868                                  std::size_t                                 p,
<a name="l00869"></a>00869                                  <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type prior_boundary_count = 0)
<a name="l00870"></a>00870 {
<a name="l00871"></a>00871     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           size_type;
<a name="l00872"></a>00872     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type selection_const_iterator;
<a name="l00873"></a>00873     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_iterator&lt;ForwardRange&gt;::type    range_iterator;
<a name="l00874"></a>00874 
<a name="l00875"></a>00875     std::pair&lt;selection_const_iterator, size_type&gt; selection_split =
<a name="l00876"></a>00876         <a class="code" href="group__selection__algorithms.html#g6c57905062dfe8a3ac00091dcf5988a0">adobe::selection_find_boundary</a>(selection, p);
<a name="l00877"></a>00877 
<a name="l00878"></a>00878     range_iterator first(boost::begin(range));
<a name="l00879"></a>00879     range_iterator range_p(boost::next(first, p));
<a name="l00880"></a>00880     range_iterator last(boost::end(range));
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     range_iterator i(<a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(boost::begin(selection), selection_split.first,
<a name="l00883"></a>00883                                                 first, first, range_p,
<a name="l00884"></a>00884                                                 prior_boundary_count));
<a name="l00885"></a>00885 
<a name="l00886"></a>00886     range_iterator j(<a class="code" href="group__selection__algorithms.html#ga3ea568d2a02b1c030de276c101b7ec8">selection_stable_partition</a>(selection_split.first, boost::end(selection),
<a name="l00887"></a>00887                                                 first, range_p, last,
<a name="l00888"></a>00888                                                 selection_split.second + 1));
<a name="l00889"></a>00889 
<a name="l00890"></a>00890     <span class="keywordflow">return</span> std::pair&lt;range_iterator, range_iterator&gt;(i, j);
<a name="l00891"></a>00891 }
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">/****************************************************************************************************/</span>
<a name="l00899"></a>00899 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection,
<a name="l00900"></a>00900           <span class="keyword">typename</span> ForwardRange&gt;
<a name="l00901"></a><a class="code" href="group__selection__algorithms.html#ga8a1c40a0ae2863e8bec07bef570bd3d">00901</a> Selection <a class="code" href="group__selection__algorithms.html#ga8a1c40a0ae2863e8bec07bef570bd3d">index_set_to_selection</a>(<span class="keyword">const</span> ForwardRange&amp; index_set)
<a name="l00902"></a>00902 {
<a name="l00903"></a>00903     Selection result;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     <span class="comment">// REVISIT (fbrereto) : This would go much faster using divide-and-conquer</span>
<a name="l00906"></a>00906     <span class="comment">//                      and eventually balanced reduction.</span>
<a name="l00907"></a>00907 
<a name="l00908"></a>00908     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;ForwardRange&gt;::type range_const_iterator;
<a name="l00909"></a>00909 
<a name="l00910"></a>00910     range_const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::begin(index_set));
<a name="l00911"></a>00911     range_const_iterator last(boost::end(index_set));
<a name="l00912"></a>00912 
<a name="l00913"></a>00913     <span class="keywordflow">for</span> (; iter != last; ++iter)
<a name="l00914"></a>00914     {
<a name="l00915"></a>00915         Selection tmp;
<a name="l00916"></a>00916 
<a name="l00917"></a>00917         tmp.push_back(*iter);
<a name="l00918"></a>00918         tmp.push_back(*iter + 1);
<a name="l00919"></a>00919 
<a name="l00920"></a>00920         result = <a class="code" href="group__selection__algorithms.html#g7d151d2d10f526bacd2264accb8198ad" title="selection_union implementation">selection_union</a>(result, tmp);
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="keywordflow">return</span> result;
<a name="l00924"></a>00924 }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926 <span class="comment">/****************************************************************************************************/</span>
<a name="l00932"></a>00932 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Selection,
<a name="l00933"></a>00933           <span class="keyword">typename</span> OutputIterator&gt;
<a name="l00934"></a><a class="code" href="group__selection__algorithms.html#ga1b7513dba97d3b2447fd2ea35c8f0e2">00934</a> OutputIterator <a class="code" href="group__selection__algorithms.html#ga1b7513dba97d3b2447fd2ea35c8f0e2">selection_to_index_set</a>(<span class="keyword">const</span> Selection&amp;                            selection,
<a name="l00935"></a>00935                                       <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type max_index,
<a name="l00936"></a>00936                                       OutputIterator                              output)
<a name="l00937"></a>00937 {
<a name="l00938"></a>00938     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_size&lt;Selection&gt;::type           size_type;
<a name="l00939"></a>00939     <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Selection&gt;::type selection_const_iterator;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <span class="keywordtype">bool</span>                     selected(<a class="code" href="group__selection__algorithms.html#g3c24719c51126b824d063b9caec4d3c6" title="start_selected implementation">start_selected</a>(selection));
<a name="l00942"></a>00942     std::size_t              index(0);
<a name="l00943"></a>00943     selection_const_iterator <a class="code" href="structadobe_1_1iter.html">iter</a>(boost::begin(selection));
<a name="l00944"></a>00944     selection_const_iterator last(boost::end(selection));
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="keywordflow">while</span> (iter != last)
<a name="l00947"></a>00947     {
<a name="l00948"></a>00948         <span class="keywordflow">while</span> (index != *iter &amp;&amp; index != max_index)
<a name="l00949"></a>00949         {
<a name="l00950"></a>00950             <span class="keywordflow">if</span> (selected)
<a name="l00951"></a>00951                 *output++ = index;
<a name="l00952"></a>00952 
<a name="l00953"></a>00953             ++index;
<a name="l00954"></a>00954         }
<a name="l00955"></a>00955 
<a name="l00956"></a>00956         selected = !selected;
<a name="l00957"></a>00957         ++iter;
<a name="l00958"></a>00958     }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960     <span class="keywordflow">return</span> output;
<a name="l00961"></a>00961 }
<a name="l00962"></a>00962 
<a name="l00963"></a>00963 <span class="comment">/*************************************************************************************************/</span>
<a name="l00964"></a>00964 
<a name="l00965"></a>00965 } <span class="comment">// namespace adobe</span>
<a name="l00966"></a>00966 
<a name="l00967"></a>00967 <span class="comment">/*************************************************************************************************/</span>
<a name="l00968"></a>00968 
<a name="l00969"></a>00969 <span class="preprocessor">#endif</span>
<a name="l00970"></a>00970 <span class="preprocessor"></span>
<a name="l00971"></a>00971 <span class="comment">/*************************************************************************************************/</span>
</pre></div></div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
