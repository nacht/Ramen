<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: Expression Reference</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="adobe_apollo.html">Adobe Air</a><br/>
        <a href="http://stlab.adobe.com/gil/">Adobe GIL</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>
        <a href="http://labs.adobe.com">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://www.adobe.com/products/xmp/">Adobe XMP</a><br/>
        <a href="http://www.mozilla.org/projects/tamarin">Tamarin project<br/>(Mozilla Foundation)</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.5.9 -->
<div class="contents">
<h1>Expression Reference<br>
<small>
[<a class="el" href="group__asl__libraries.html">Libraries</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<h2><a class="anchor" name="expression_lexical_conventions">
Lexical Conventions</a></h2>
The language parser operates on a C++ istream with the locale set to the standard "C" locale. Spaces, tabs, and line endings (composed of cr, lf, or (cr, lf) ) are considered white space and are ignored, except as they separate tokens.<h3><a class="anchor" name="lexical_grammar">
Lexical Grammar</a></h3>
<div class="fragment"><pre class="fragment">
simple_token    = "+" | "-" | "*" | "/" | "%" | "?" | ":" | "=" | "!" | "{" | "}" | "&lt;" | "&gt;" | ";" | "@".
compound_token  = "&amp;&amp;" | "||" | "&lt;=" | "&gt;=" | "==" | "!=".
string          = quoted_string { quoted_string }.
lead_comment    = "/*" {character} "*/".
trail_comment   = "//" {character} eol.
identifer       = (letter | "_") {letter | "_" | digit}.
keywords        = "empty" | "true" | "false" | &lt;extension&gt;.
number          = digits ["e" ["+" | "-"]] digits.

quoted_string   = '"' {character} '"' | "'" {character} "'".
digits      = digit { digit }.
</pre></div><h3><a class="anchor" name="comments">
Comments</a></h3>
Comments are lexical tokens to facilitate the editing and subsequent formatting of the language in alternate representations. The trail_comment is terminated by any form of line ending.<h3><a class="anchor" name="strings">
Strings</a></h3>
Strings can be quoted either with single or double quotation marks. Adjacent strings are concatenated into a single string. There are no quote characters within a string. It is expected that the text within the string represents a higher-level representation (such as XML) which can provide additional mark-up.<h3><a class="anchor" name="keywords">
Keywords</a></h3>
The <code>empty</code>, <code>true</code>, and <code>false</code> keywords represent the associated values (the <code>empty</code> value corresponds to adobe::empty_t). The list of keywords can be extended by dependent grammars.<h3><a class="anchor" name="numbers">
Numbers:</a></h3>
Numbers are always 64 bit IEEE double precision values.<p>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>(sparent) : Lexical conventions for hexadecimal constants may be added in the future.</dd></dl>
<h2><a class="anchor" name="expression_expressions">
Expressions</a></h2>
The expression syntax and semantics are designed to closely resemble the C language. Expressions are dynamically typed and there is no implicit type coercion between types.<h3><a class="anchor" name="expression_grammar">
Expression Grammar</a></h3>
<div class="fragment"><pre class="fragment">
expression          = or_expression ["?" expression ":" expression].

or_expression           = and_expression { "||" and_expression }.
and_expression          = equality_expression { "&amp;&amp;" equality_expression }.
equality_expression     = relational_expression { ("==" | "!=") relational_expression }.
relational_expression       = additive_expression { ("&lt;" | "&gt;" | "&lt;=" | "&gt;=") additive_expression }.
additive_expression     = multiplicative_expression { ("+" | "-") multiplicative_expression }.
multiplicative_expression   = unary_expression { ("*" | "/" | "%") unary_expression }.

unary_expression        = postfix_expression | (unary_operator unary_expression).
unary_operator          = "+" | "-" | "!".

postfix_expression      = primary_expression { ("[" expression "]") | ("." identifier) }.

primary_expression      = name | number | boolean | string | "empty" | array | dictionary
                    | variable_or_fuction | ( "(" expression ")" ).

variable_or_function        = identifier ["(" [argument_expression_list] ")"].

array               = "[" [argument_list] "]".
dictionary          = "{" named_argument_list "}".

argument_expression_list    = named_argument_list | argument_list.

argument_list           = expression { "," expression }.
named_argument_list     = named_argument { "," named_argument }.
named_argument          = identifier ":" expression.

name                = "@" identifier.
boolean             = "true" | "false".
</pre></div><h3><a class="anchor" name="types">
Types</a></h3>
<h4><a class="anchor" name="boolean">
boolean</a></h4>
Values of type <code>boolean</code> are either <code>true</code> or <code>false</code>.<h4><a class="anchor" name="name">
name</a></h4>
A name is a literal identifier. Names are used as keys for dictionaries [see dictionary_t] and can be used as enumerations would be used in C.<h4><a class="anchor" name="number">
number</a></h4>
Numbers are always 64 bit IEEE double precision values.<h4><a class="anchor" name="string">
string</a></h4>
A value of type <code>string</code> can be any sequence of non '\0' characters.<h4><a class="anchor" name="empty">
empty</a></h4>
A value of type <code>empty</code> has only the single value of <code>empty</code>.<h4><a class="anchor" name="array">
array</a></h4>
An <code>array</code> is a heterogeneous (any type, including arrays and dictionaries may be placed in an array) ordered sequence. Arrays support random access through the index operator. See [indexing]<h4><a class="anchor" name="dictionary">
dictionary</a></h4>
A <code>dictionary</code> is a heterogeneous SortedAssociativeContainer that associates objects of type <code>name</code> (the key) with objects of any type. It is also a UniqueAssociativeContainer, no two elements have the same key.<h3><a class="anchor" name="operators">
Operators</a></h3>
<h4><a class="anchor" name="operator_index">
Index Operator</a></h4>
An <code>array</code> or <code>dictionary</code> may be indexed by an expression in square brackets. For an <code>array</code>, the expression must evaluate to a <code>number</code>, the floor of which will be used as a zero based integer index. For a <code>dictionary</code>, the expression must evaluate to a <code>name</code>. If the indexed item does not exist in the container a runtime exception is thrown.<p>
A <code>dictionary</code> may also be indexed using the dot operator where the following identifier is evaluated as a name. The following two expressions are equivalent: <div class="fragment"><pre class="fragment">dict[@my_name]
dict.my_name
</pre></div><h4><a class="anchor" name="operator_unary">
Unary Operators</a></h4>
The operand for unary <code>+</code> and <code>-</code> must be of type <code>number</code>. The unary <code>-</code> operator returns the negative of the operand. The unary <code>+</code> operator is ignored, and provided for symmetry with unary <code>-</code>.<p>
The operand for <code>!</code> must be of type <code>boolean</code>. The result is <code>true</code> if the operand is <code>false</code>. The result is <code>false</code> if the operand is <code>true</code>.<h4><a class="anchor" name="operator_multiplicative">
Arithmetic Operators</a></h4>
The operands for <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, and <code>%</code> must be of type <code>number</code>. The result of the binary operator <code>+</code> is the sum of the operands. The result of the binary operator <code>-</code> is the difference of the operands.<p>
Operators <code>*</code> and <code>/</code> respectively denote floating point multiplication and division. The <code>%</code> operator will truncate each operand to an integer and return the remainder. It is undefined if the remainder is negative if one of the operands is negative.<p>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>(sparent) : The % operator is left over from Eve1 which supported only integer arithmetic. It will likely be redefined in the future to be a proper floating point modulus.</dd></dl>
<h4><a class="anchor" name="operator_logical">
Logical Operators</a></h4>
The operands for <code>&amp;&amp;</code> and <code>||</code> must be of type <code>boolean</code>. The result of the <code>&amp;&amp;</code> and <code>||</code> operator is of type <code>boolean</code> denoting the logical-and or logical-or of the operands. The first operand is evaluated and if it is <code>false</code> for &amp;&amp; or <code>true</code> for || then the second operand is not evaluated.<p>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>(sparent) : [move this discussion down to a section on evaluating sheets.] The tracking of "considered" in Adam is currently handled at too course a granularity, an item is considered if is evaluated - there are some interesting issues with short circuit booleans - for example, for logical-or if the second operand evaluates to true - the value of the first operand doesn't matter. Was it considered? Similarly, does it contribute to the result. The answer today is yes for both of these but this may be revisited.</dd></dl>
<h4><a class="anchor" name="operator_relational">
Relational Operators</a></h4>
The operands for <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>&lt;=</code> (less than or equal to), and <code>&gt;=</code> (greater than or equal to) must be of type <code>number</code>. The result is of type <code>boolean</code>.<h4><a class="anchor" name="operator_equality">
Equality Operators</a></h4>
The operands for <code>==</code> (equal) and <code>!=</code> (not equal) can be of any type. If the operands are not of the same type then they will compare as not equal.<h4><a class="anchor" name="operator_conditional">
Conditional Operator</a></h4>
The conditional operator takes three operands, separated by <code></code>? and <code></code>:. The first operand must be of type <code>boolean</code>. If the first operand is <code>true</code>, then the result is the second operand. If the first operand is <code>false</code> then the result is the third operand. Only one of the second and third expressions is evaluated.<h3><a class="anchor" name="precedence">
Precedence and Order of Evaluation</a></h3>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>(sparent) : Allowing for operator overloading on external types is a possible future extension.</dd></dl>
<h3><a class="anchor" name="special_functions">
Special Functions</a></h3>
<em>intentionally empty</em><h3><a class="anchor" name="supplied_functions">
Supplied Functions</a></h3>
<em>intentionally empty</em> </div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
